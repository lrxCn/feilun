var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,a=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&o(e,n,t[n]);if(r)for(var n of r(t))s.call(t,n)&&o(e,n,t[n]);return e},c=(e,r)=>t(e,n(r));"undefined"!=typeof require&&require;import{r as i,R as u,u as m,J as d,F as p,c as E,H as f,L as h,S as y,a as v,b as g,d as b}from"./vendor.4542b73f.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var x=(e={})=>{var t;const n=i.exports.useRef(0),[r,l]=i.exports.useState(e.src||(null==(t=e.srclist)?void 0:t[n.current++||0]));return u.createElement("img",c(a({},e),{src:r,onError:()=>{const t=e.srclist[n.current++||0];t&&l(t)}}))};const w="https://img.icons8.com/glyph-neue/2x/easy.png",k="https://www.easyicon.cc/icon/tabler-icons/node_modules/@tabler/icons/icons/mood-smile.svg";const S=()=>{},N=async(e,t)=>(await((e=1e3)=>new Promise((t=>setTimeout(t,e))))(t),e);var C=({killMyself:e=S})=>{const[t,n]=i.exports.useState(0);return i.exports.useEffect((()=>{N("response",1e3).then(n),setTimeout(e,500)}),[]),u.createElement("div",null,"child: ",t)},O=({killMyself:e=S})=>{const[t,n]=(e=>{const[t,n]=i.exports.useState(e),r=i.exports.useRef(!1);return i.exports.useEffect((()=>()=>r.current=!0)),[t,r.current?S:n]})(0);return i.exports.useEffect((()=>{N("response",1e3).then(n),setTimeout(e,500)}),[]),u.createElement("div",null,"child: ",t)};const R=({get:e,set:t})=>({count:1,increase(){const{count:n}=e();t({count:n+1})},decrease(){const{count:n}=e();t({count:n-1})}});var L=()=>{const{count:e,increase:t,decrease:n}=m(R);return u.createElement("div",null,u.createElement("p",null,e),u.createElement("button",{onClick:n},"minus"))},j=()=>{const{count:e,increase:t,decrease:n}=m(R);return u.createElement("div",null,u.createElement("p",null,e),u.createElement("button",{onClick:t},"add"))};const A=e=>e.substring(e.lastIndexOf("/")+1),P=(e="")=>{const t=A(e),n=t.split(".").pop()||"png",r=document.createElement("canvas"),l=document.createElement("img");l.onload=()=>{r.width=l.width,r.height=l.height;r.getContext("2d").drawImage(l,0,0,l.width,l.height),r.getContext("2d").drawImage(l,0,0,l.width,l.height),r.toBlob((e=>{const n=document.createElement("a");n.href=window.URL.createObjectURL(e),n.download=t,n.click()}),`image/${n}`)},l.setAttribute("crossOrigin","Anonymous"),l.src=e},q=(e,t="打包下载")=>{if(!(e.length>0))return;const n=new d,r={},l=e.map((e=>{return(t=e,new Promise((e=>{const n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=()=>200===n.status&&e(n.response),n.send()}))).then((t=>{const l=A(e);n.file(l,t,{binary:!0}),r[l]=t}));var t}));Promise.all(l).then((()=>{n.generateAsync({type:"blob"}).then((e=>{p.saveAs(e,`${t}.zip`)}))}))},I=e=>{Array.isArray(e)?e.length>1?q(e):P(e.slice(0).pop()):P(e)};const $="/2.jpeg",D="/3.jpeg";var M=({value:e=0,itemStyle:t,updateRecycle:n}={})=>{const r=i.exports.useRef(!0),[{transition:l,transformValue:s,prevValue:o},m]=i.exports.useState({transition:!1,transformValue:0,prevValue:0});i.exports.useEffect((()=>{m((t=>c(a({},t),{transition:!0,transformValue:-100*(e+(e<o?10:0))-(n||r.current?1e3:0)})))}),[e]),i.exports.useEffect((()=>r.current=!1),[]);return u.createElement("div",{className:"roll-number-content",onTransitionEnd:()=>{m((t=>c(a({},t),{transition:!1,transformValue:-100*e,prevValue:e})))}},[...Array(10).keys(),...Array(10).keys()].map(((e,n)=>u.createElement("span",{key:`${e}_${n}`,className:E("roll-number-cell",l?"roll-number-cell--transition":"roll-number-cell--hidden"),style:c(a({},t),{transform:`translateY(${s}%)`})},e))))};const V=(e,t)=>{const{radix:n=0,omitDecimals:r=!0}=t||{},l=null==e?void 0:e.toFixed(n),s=r?parseFloat(l).toString():l,[o,a]=s.split("."),c=(null==o?void 0:o.length)||0,i=(null==o?void 0:o.split(""))||[],u=(null==a?void 0:a.split(""))||[],m=[];return i.forEach(((e,t)=>{m.push({value:e,key:c-t})})),u.length&&m.push({value:".",key:"0"}),u.forEach(((e,t)=>{m.push({value:e,key:-1*(t+1)})})),m};var T=({number:e=0,radix:t=0,omitDecimals:n=!0,updateRecycle:r=!1,itemStyle:l={}})=>{const[s,o]=i.exports.useState(V(0,{radix:t,omitDecimals:n}));i.exports.useEffect((()=>{o(V(e,{radix:t,omitDecimals:n}))}),[e]);const{fontSize:a,lineHeight:c,height:m}=l||{};return u.createElement("div",{className:"roll-number",style:{height:m||c||a||"1rem"}},s.map((e=>/^\d$/.test(e.value)?u.createElement(M,{updateRecycle:r,itemStyle:l,key:e.key,kname:e.key,value:parseInt(e.value,10)}):u.createElement("span",{key:e.key,style:l},e.value))))},z=[{route:"/download",title:"批量下载图片",Component:()=>u.createElement("div",{className:"con-download"},u.createElement("div",{className:"con-download-btn",onClick:()=>{I($)}},"down1"),u.createElement("div",{className:"con-download-btn",onClick:()=>{I([$,D])}},"down2"))},{route:"/safeImage",Component:()=>u.createElement("div",null,u.createElement("h6",null,"可以当做正常的img使用"),u.createElement(x,{src:w,className:"outline square-100",alt:"hand"}),u.createElement("hr",null),u.createElement("h6",null,"也可以不传src 只穿srclist"),u.createElement(x,{srclist:[w,k],className:"square-100"}),u.createElement("hr",null),u.createElement("h6",null,"当srclist第一个地址报错的时候，会尝试使用第二个"),u.createElement(x,{srclist:[`mass${w}`,k],className:"square-100"}),u.createElement("hr",null),u.createElement("h6",null,"src 和 srclist 可以一起使用，src优先级高于srcList"),u.createElement(x,{src:`mass${k}`,srclist:[w,k],className:"square-100"}),u.createElement("hr",null))},{route:"/setState",title:"安全的setState",Component:()=>{const[e,t]=i.exports.useState(!0),[n,r]=i.exports.useState(!0);return u.createElement("div",null,u.createElement("h6",null,"当子组件卸载发生在setState之前，控制台就会报一个warning: Can't perform a React state update on an unmounted component."),e&&u.createElement(C,{killMyself:()=>t(!1)}),u.createElement("hr",null),u.createElement("h6",null,"如果使用useSafeState就不会有这样的问题"),n&&u.createElement(O,{killMyself:()=>r(!1)}),u.createElement("hr",null))}},{route:"/flooks",title:"数据流",Component:()=>u.createElement("div",{className:"App"},u.createElement(j,null),u.createElement(L,null))},{route:"/flipNumber",title:"数字滚动",Component:()=>{const[e,t]=i.exports.useState(10),[n,r]=i.exports.useState(10);return u.createElement("div",null,u.createElement(T,{number:e,radix:3,omitDecimals:!1,itemStyle:{color:"red",fontSize:"50px"}}),u.createElement("div",{className:"add noselect",onClick:()=>t(e+1)},"add1"),u.createElement(T,{number:n,updateRecycle:!0,radix:3,omitDecimals:!1,itemStyle:{color:"red",fontSize:"50px"}}),u.createElement("div",{className:"add noselect",onClick:()=>r(n+1)},"add2"))}}],F=()=>{const e=i.exports.useRef(((e=[],t)=>e.reduce(((e,n)=>Object.assign(e,{[n[t]]:n})),{}))(z,"route")),t=()=>{var t;const{route:n,title:r=n.slice(1)}=null==(t=e.current)?void 0:t[location.hash.slice(1)];document.title=r};return((e,t,n=window)=>{const r=i.exports.useRef();i.exports.useEffect((()=>{r.current=t}),[t]),i.exports.useEffect((()=>{if(!n||!n.addEventListener)return;const t=e=>r.current(e);return n.addEventListener(e,t),()=>{n.removeEventListener(e,t)}}),[e,n])})("hashchange",t),i.exports.useEffect(t,[]),u.createElement(f,null,u.createElement("div",{className:"con"},u.createElement("ul",null,z.map((({title:e,route:t})=>u.createElement("li",{key:t},u.createElement(h,{to:t},e||t.slice(1)))))),u.createElement(y,null,z.map((({route:e,Component:t})=>u.createElement(v,{key:e,path:e,component:t}))),u.createElement(g,{path:"/",to:z[0].route}))))};b.render(u.createElement(u.StrictMode,null,u.createElement(F,null)),document.getElementById("root"));
